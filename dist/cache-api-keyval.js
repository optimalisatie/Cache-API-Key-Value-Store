(function(g){var c="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this;caches instanceof CacheStorage?c.CacheApiDB=g():(console&&console.error("Browser does not support Cache API"),c.CacheApiDB=c.c?c.c():function(){var c=this;c.supported=0;["get","set","del","prune"].forEach(function(e){c[e]=function(){return Promise.reject("Browser does not support Cache API")}})})})(function(){function g(a,b){return caches.open(a).then(function(d){var a=new Request((b||
"").toString());return d.match(a).then(function(b){var a;(a=!b)||((a=b.headers.get("x-expire"))&&b.headers.get("x-date")+a<Math.round(Date.now()/1E3)?(h(),a=!0):a=void 0);return a?!1:"application/json"===b.headers.get("Content-Type")?b.json():b.text()})})}function c(a,b,d){var c;return caches.open(a).then(function(a){var e=new Request((b||"").toString()),f={};f["x-date"]=Math.round(Date.now()/1E3);"object"===typeof d?(f["Content-Type"]="application/json",d=JSON.stringify(d)):(d=d.toString(),f["Content-Type"]=
"text/plain");if(c){c=parseInt(c);if(isNaN(c)||0>c)throw Error("Expire time not numeric");f["x-expire"]=c.toString()}f=new Response(d,{headers:f});return a.put(e,f)})}function h(){var a=key;caches.open(store).then(function(b){var c=new Request((a||"").toString());return b["delete"](c)})}function e(a,b){if(this instanceof e)this.b=a,this.supported=1,"object"==typeof b&&b.namespace&&(this.a=b.namespace);else return new e(a,b)}e.prototype.get=function(a){var b=this.a;return g(this.b,(b?b+":":"")+a)};
e.prototype.set=function(a,b){var d=this.a;return c(this.b,(d?d+":":"")+a,b)};return e});
