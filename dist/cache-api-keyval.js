(function(e){function g(a){d.CacheApiDB=a;for(a=h.shift();a;)a()}var d="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,h=[];d.onCacheApiDB=function(a){d.CacheApiDB?a():h.push(a)};d.a||(d.a=function(){var a=this;a.supported=0;["get","set","del","prune"].forEach(function(c){a[c]=function(){return Promise.reject(error)}})});caches instanceof CacheStorage?caches.open("x")["catch"](function(a){"SecurityError"==a.name?console&&console.error("Cache API is blocked by browser. Please check privacy settings (cookies, no-track option etc)."):
console&&console.error("Cache API error: "+a.message);g(d.a)}).then(function(){g(e())}):(console&&console.error("Browser does not support Cache API"),d.CacheApiDB=d.a)})(function(){function e(a,b){return caches.open(a).then(b)}function g(a,b){return e(a,function(a){var c=new Request((b||"").toString());return a.match(c).then(function(a){var b;(b=!a)||((b=a.headers.get("x-expire"))&&a.headers.get("x-date")+b<Math.round(Date.now()/1E3)?(h(),b=!0):b=void 0);return b?!1:a.json()})})}function d(a,b,d){var c;
return e(a,function(a){var e=new Request((b||"").toString()),f={};f["x-date"]=Math.round(Date.now()/1E3);f["Content-Type"]="application/json";d=JSON.stringify(d);if(c){c=parseInt(c);if(isNaN(c)||0>c)throw Error("Expire time not numeric");f["x-expire"]=c.toString()}f=new Response(d,{headers:f});return a.put(e,f)})}function h(){var a=key;e(store,function(b){var c=new Request((a||"").toString());return b["delete"](c)})}function a(c,b){if(this instanceof a)this.c=c,this.supported=1,"object"==typeof b&&
b.namespace&&(this.b=b.namespace);else return new a(c,b)}a.prototype.get=function(a){var b=this.b;return g(this.c,(b?b+":":"")+a)};a.prototype.set=function(a,b){var c=this.b;return d(this.c,(c?c+":":"")+a,b)};return a});
